<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>PET-ID Editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  :root {
    --bg: #f6f6f6;
    --card: #ffffff;
    --accent: #d8b48a;
    --text: #2b2b2b;
    --muted: #777;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont,
                 "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
  }

  /* ===============================
     üîê LOCK SCREEN
     =============================== */
  .lock-wrapper {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px;
  }

  .lock {
    width: 100%;
    max-width: 520px;
    background: var(--card);
    padding: 32px;
    border-radius: 18px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    text-align: center;
  }

  .lock input {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 16px;
    margin-bottom: 16px;
  }

  .lock button {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    border: none;
    background: var(--accent);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
  }

  /* ===============================
     ‚úèÔ∏è EDITOR
     =============================== */
  .editor {
    display: none;
    max-width: 1400px;
    margin: 0 auto;
    padding: 32px;          /* ‚Üê symmetrisch */
  }

  .grid {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
    gap: 32px;              /* ‚Üê mehr Luft */
  }

  @media (max-width: 900px) {
    .grid {
      grid-template-columns: 1fr;
    }
  }

  .card {
    background: var(--card);
    border-radius: 18px;
    box-shadow: 0 4px 14px rgba(0,0,0,0.06);
  }

  /* üëâ DAS IST DER WICHTIGE FIX */
  .card-inner {
    padding: 26px 32px;     /* ‚Üê links = rechts garantiert */
  }

  h2 {
    margin-top: 0;
    margin-bottom: 14px;
  }

  label {
    display: block;
    font-size: 13px;
    margin-top: 14px;
    color: var(--muted);
  }

  input,
  textarea {
    width: 100%;
    padding: 12px 14px;     /* ‚Üê symmetrisch */
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 15px;
  }

  textarea {
    resize: vertical;
    min-height: 70px;
  }

  input[type="file"] {
    padding: 10px;          /* ‚Üê File-Input entsch√§rft */
  }

  .actions {
    grid-column: 1 / -1;
  }

  .actions button {
    width: 100%;
    padding: 16px;
    border-radius: 14px;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 12px;
  }

  .download {
    background: #4caf50;
    color: #fff;
  }
</style>
</head>

<body>

<!-- üîê LOCK -->
<div class="lock-wrapper" id="lockWrapper">
  <div class="lock">
    <h2>üîê PET-ID Editor</h2>
    <input id="pin" placeholder="PIN">
    <button onclick="unlock()">Entsperren</button>
  </div>
</div>

<!-- ‚úèÔ∏è EDITOR -->
<div class="editor" id="editor">
  <div class="grid">

    <div class="card"><div class="card-inner">
      <h2>Meta</h2>
      <label>Name</label><input id="name">
      <label>PET-ID</label><input id="pet_id">
      <label>Untertitel</label><input id="subtitle">
      <label>Bild</label><input type="file" id="image">
    </div></div>

    <div class="card"><div class="card-inner">
      <h2>Tierdaten</h2>
      <label>Tierart</label><input id="species">
      <label>Geschlecht</label><input id="gender">
      <label>Geburtsdatum</label><input id="birthdate">
      <label>Farbe</label><input id="color">
      <label>Rasse</label><input id="breed">
      <label>Kastriert</label><input id="castrated">
      <label>Freig√§nger</label><input id="outdoor">
      <label>Gechippt</label><input id="chipped">
      <label>Geimpft</label><input id="vaccinated">
      <label>Mikrochip</label><input id="microchip">
      <label>Hinweis</label><textarea id="note"></textarea>
    </div></div>

    <div class="card"><div class="card-inner">
      <h2>Besitzer 1</h2>
      <label>Name</label><input id="o1_name">
      <label>Telefon</label><input id="o1_phone">
      <label>E-Mail</label><input id="o1_email">
    </div></div>

    <div class="card"><div class="card-inner">
      <h2>Besitzer 2</h2>
      <label>Name</label><input id="o2_name">
      <label>Telefon</label><input id="o2_phone">
      <label>E-Mail</label><input id="o2_email">
    </div></div>

    <div class="card"><div class="card-inner">
      <h2>Tierarzt</h2>
      <label>Praxis</label><input id="vet_practice">
      <label>Tier√§rztin</label><input id="vet_doctor">
      <label>Telefon</label><input id="vet_phone">
      <label>E-Mail</label><input id="vet_email">
      <label>Website</label><input id="vet_website">
    </div></div>

    <div class="card"><div class="card-inner">
      <h2>Notfall</h2>
      <label>Klinik</label><input id="em_clinic">
      <label>Adresse (HTML erlaubt)</label><textarea id="em_address"></textarea>
      <label>Telefon</label><input id="em_phone">
      <label>Hinweis</label><input id="em_note">
    </div></div>

    <div class="card"><div class="card-inner">
      <h2>Zuhause</h2>
      <label>Adresse (HTML erlaubt)</label><textarea id="home"></textarea>
    </div></div>

    <div class="card actions"><div class="card-inner">
      <h2>Export</h2>
      <button class="download" onclick="downloadJSON()">‚¨áÔ∏è pet.json herunterladen</button>
      <button class="download" onclick="downloadImage()">‚¨áÔ∏è Bild herunterladen</button>
    </div></div>

  </div>
</div>

<script>
const EDITOR_PIN = "4711";
let imageFile = null;

function unlock() {
  if (pin.value === EDITOR_PIN) {
    lockWrapper.style.display = "none";
    editor.style.display = "block";
  } else {
    alert("Falscher PIN");
  }
}

image.onchange = e => imageFile = e.target.files[0];

function downloadJSON() {
  const pet = {
    meta: {
      pet_id: pet_id.value,
      name: name.value,
      subtitle: subtitle.value,
      image: imageFile ? imageFile.name : "",
      last_updated: new Date().toISOString().slice(0,10)
    },
    animal: {
      species: species.value,
      gender: gender.value,
      birthdate: birthdate.value,
      color: color.value,
      breed: breed.value,
      castrated: castrated.value,
      outdoor: outdoor.value,
      chipped: chipped.value,
      vaccinated: vaccinated.value,
      microchip: microchip.value,
      note: note.value
    },
    owners: [
      { name: o1_name.value, phone: o1_phone.value, email: o1_email.value },
      { name: o2_name.value, phone: o2_phone.value, email: o2_email.value }
    ],
    vet: {
      practice: vet_practice.value,
      doctor: vet_doctor.value,
      phone: vet_phone.value,
      email: vet_email.value,
      website: vet_website.value
    },
    emergency: {
      clinic: em_clinic.value,
      address_html: em_address.value,
      phone: em_phone.value,
      note: em_note.value
    },
    home: {
      address_html: home.value
    }
  };

  const blob = new Blob(
    [JSON.stringify(pet, null, 2)],
    { type: "application/json" }
  );
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "pet.json";
  a.click();
}

function downloadImage() {
  if (!imageFile) {
    alert("Kein Bild ausgew√§hlt");
    return;
  }
  const a = document.createElement("a");
  a.href = URL.createObjectURL(imageFile);
  a.download = imageFile.name;
  a.click();
}
</script>

</body>
</html>
