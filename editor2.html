<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>PET-ID Editor ‚Äì Gismo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin:0;
    font-family:system-ui,-apple-system;
    background:#f6f6f6;
  }

  .layout {
    max-width: 1100px;
    margin: auto;
    padding: 16px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  @media (max-width: 900px) {
    .layout {
      grid-template-columns: 1fr;
    }
  }

  h1 { margin:0 0 8px; }

  .card {
    background:#fff;
    border-radius:14px;
    padding:16px;
    box-shadow:0 4px 14px rgba(0,0,0,.06);
  }

  label {
    display:block;
    margin-top:10px;
    font-size:13px;
    color:#555;
  }

  input, textarea {
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:15px;
  }

  textarea { resize:vertical; min-height:60px; }

  button {
    margin-top:14px;
    padding:14px;
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    width:100%;
    background:#d8b48a;
  }

  /* Preview */
  .preview {
    background:#f6f6f6;
    padding:12px;
    border-radius:14px;
  }

  .preview-card {
    background:#fff;
    border-radius:14px;
    padding:16px;
    text-align:center;
  }

  .preview img {
    width:160px;
    height:160px;
    border-radius:50%;
    object-fit:cover;
    border:4px solid #d8b48a;
    margin-bottom:10px;
  }

  .muted { color:#777; font-size:14px; }
</style>
</head>

<body>

<div class="layout">

  <!-- EDITOR -->
  <div class="card">
    <h1>üêæ PET-ID Editor ‚Äì Gismo</h1>
    <p class="muted">√Ñnderungen werden lokal im Browser gespeichert</p>

    <label>Name</label>
    <input id="name">

    <label>PET-ID</label>
    <input id="pet_id">

    <label>Untertitel</label>
    <input id="subtitle">

    <label>Geburtsdatum</label>
    <input id="birthdate">

    <label>Bild hochladen</label>
    <input type="file" accept="image/*" onchange="loadImage(event)">

    <button onclick="save()">üíæ Speichern</button>
  </div>

  <!-- LIVE PREVIEW -->
  <div class="preview">
    <div class="preview-card">
      <img id="p_img">
      <h2 id="p_name">‚Äì</h2>
      <div class="muted">PET-ID: <span id="p_id">‚Äì</span></div>
      <div class="muted" id="p_subtitle">‚Äì</div>
      <div class="muted" id="p_birthdate"></div>
    </div>
  </div>

</div>

<script>
  const pet = JSON.parse(localStorage.getItem("petData")) || {};

  const $ = id => document.getElementById(id);

  function updatePreview() {
    $("p_name").textContent = $("name").value || "‚Äî";
    $("p_id").textContent = $("pet_id").value || "‚Äî";
    $("p_subtitle").textContent = $("subtitle").value || "";
    $("p_birthdate").textContent = $("birthdate").value || "";

    if (pet.image) $("p_img").src = pet.image;
  }

  function loadImage(e) {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = () => {
      pet.image = reader.result;
      $("p_img").src = pet.image;
    };
    reader.readAsDataURL(file);
  }

  function save() {
    pet.name = $("name").value;
    pet.pet_id = $("pet_id").value;
    pet.subtitle = $("subtitle").value;
    pet.birthdate = $("birthdate").value;

    localStorage.setItem("petData", JSON.stringify(pet));
    alert("Gespeichert ‚Äì index.html neu laden");
  }

  // INIT
  $("name").value = pet.name || "";
  $("pet_id").value = pet.pet_id || "";
  $("subtitle").value = pet.subtitle || "";
  $("birthdate").value = pet.birthdate || "";

  if (pet.image) $("p_img").src = pet.image;

  ["name","pet_id","subtitle","birthdate"].forEach(id =>
    $(id).addEventListener("input", updatePreview)
  );

  updatePreview();
</script>

</body>
</html>
